<% layout("/layouts/boilerplate") %>

<!-- Bootstrap Icons (only once in layout if not added globally) -->
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
/>

<!-- 🌟 Premium Styling -->
<style>
  .gradient-btn {
    background: linear-gradient(to right, #ff416c, #ff4b2b);
    box-shadow: 0 4px 14px rgba(255, 65, 108, 0.4);
    transition: all 0.3s ease-in-out;
  }

  .gradient-btn:hover {
    background: linear-gradient(to right, #ff4b2b, #ff416c);
    box-shadow: 0 6px 20px rgba(255, 65, 108, 0.5);
    transform: translateY(-2px);
  }

  .input-field:focus {
    border-color: #0d6efd;
    box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
    transition: all 0.3s;
  }

  .btn-fixed {
    min-width: 120px;
    padding-left: 1.5rem;
    padding-right: 1.5rem;
  }

  @media (max-width: 576px) {
    .d-flex.justify-content-between {
      flex-direction: column;
      gap: 1rem;
    }
    .btn-fixed {
      width: 100% !important;
    }
  }
</style>

<!-- 🧠 Page Layout -->
<div class="container py-5 px-3 px-md-5">
  <div class="row justify-content-center">
    <div class="col-lg-6 col-md-8 col-sm-10">
      <div class="shadow-lg p-5 rounded-4 bg-white border border-1">
        <h1 class="text-center mb-4 fw-bold display-6" style="letter-spacing: 1px">
          Login to <span class="text-primary">Wanderlust</span>
        </h1>

        <form action="/login" method="POST" novalidate class="needs-validation">
          
          <!-- Username -->
          <div class="mb-4">
            <label for="username" class="form-label">Username</label>
            <input
              type="text"
              name="username"
              class="form-control rounded-3 shadow-sm input-field"
              id="username"
              required
            />
            <div class="invalid-feedback">Please enter a username.</div>
          </div>

          <!-- Password -->
          <div class="mb-4 position-relative">
            <label for="password" class="form-label">Password</label>
            <div class="input-group">
              <input
                type="password"
                name="password"
                class="form-control rounded-start-3 shadow-sm input-field"
                id="password"
                required
              />
              <span
                class="input-group-text bg-white rounded-end-3"
                id="togglePassword"
                style="cursor: pointer"
              >
                <i class="bi bi-eye-slash-fill" id="eyeIcon"></i>
              </span>
            </div>
            <div class="invalid-feedback">Please enter a password.</div>
          </div>

          <!-- Buttons -->
          <div class="d-flex justify-content-between align-items-center flex-wrap gap-2 mt-4">
            <a href="/listings" class="btn btn-outline-dark rounded-pill btn-fixed">Back</a>
            <button
              type="submit"
              class="btn text-white rounded-pill gradient-btn btn-fixed"
            >
              Login
            </button>
          </div>

        </form>
      </div>
    </div>
  </div>
</div>

<!-- 👁️ Eye Toggle Script -->
<script>
  const togglePassword = document.getElementById("togglePassword");
  const passwordInput = document.getElementById("password");
  const eyeIcon = document.getElementById("eyeIcon");

  togglePassword.addEventListener("click", () => {
    const isPassword = passwordInput.type === "password";
    passwordInput.type = isPassword ? "text" : "password";
    eyeIcon.classList.toggle("bi-eye");
    eyeIcon.classList.toggle("bi-eye-slash-fill");
  });
</script>
